var content=function(){"use strict";function M(n){return n}const m=globalThis.browser?.runtime?.id==null?globalThis.chrome:globalThis.browser,y={matches:["*://x.com/*"],main(){console.log("script"),m.runtime.onMessage.addListener((n,e,t)=>{if(console.log("script"),n.action==="filterAndDelete"){const{startDate:s,endDate:r}=n.dateRange;document.querySelectorAll('article[data-testid="tweet"]').forEach(o=>{const p=o.querySelector("time");if(p){const f=new Date(p.getAttribute("datetime")||""),_=new Date(s),K=new Date(r);if(f>=_&&f<=K){const g=o.querySelector('[data-testid="delete"]');g&&(g.click(),setTimeout(()=>{const b=document.querySelector('[data-testid="confirmationSheetConfirm"]');b&&b.click()},1e3))}}})}})}},h=globalThis.browser?.runtime?.id==null?globalThis.chrome:globalThis.browser;function a(n,...e){}const w={debug:(...n)=>a(console.debug,...n),log:(...n)=>a(console.log,...n),warn:(...n)=>a(console.warn,...n),error:(...n)=>a(console.error,...n)};class u extends Event{constructor(e,t){super(u.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=t}static EVENT_NAME=d("wxt:locationchange")}function d(n){return`${h?.runtime?.id}:content:${n}`}function S(n){let e,t;return{run(){e==null&&(t=new URL(location.href),e=n.setInterval(()=>{let s=new URL(location.href);s.href!==t.href&&(window.dispatchEvent(new u(s,t)),t=s)},1e3))}}}class l{constructor(e,t){this.contentScriptName=e,this.options=t,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}static SCRIPT_STARTED_MESSAGE_TYPE=d("wxt:content-script-started");isTopFrame=window.self===window.top;abortController;locationWatcher=S(this);receivedMessageIds=new Set;get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return h.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,t){const s=setInterval(()=>{this.isValid&&e()},t);return this.onInvalidated(()=>clearInterval(s)),s}setTimeout(e,t){const s=setTimeout(()=>{this.isValid&&e()},t);return this.onInvalidated(()=>clearTimeout(s)),s}requestAnimationFrame(e){const t=requestAnimationFrame((...s)=>{this.isValid&&e(...s)});return this.onInvalidated(()=>cancelAnimationFrame(t)),t}requestIdleCallback(e,t){const s=requestIdleCallback((...r)=>{this.signal.aborted||e(...r)},t);return this.onInvalidated(()=>cancelIdleCallback(s)),s}addEventListener(e,t,s,r){t==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),e.addEventListener?.(t.startsWith("wxt:")?d(t):t,s,{...r,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),w.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:l.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(e){const t=e.data?.type===l.SCRIPT_STARTED_MESSAGE_TYPE,s=e.data?.contentScriptName===this.contentScriptName,r=!this.receivedMessageIds.has(e.data?.messageId);return t&&s&&r}listenForNewerScripts(e){let t=!0;const s=r=>{if(this.verifyScriptStartedEvent(r)){this.receivedMessageIds.add(r.data.messageId);const i=t;if(t=!1,i&&e?.ignoreFirstEvent)return;this.notifyInvalidated()}};addEventListener("message",s),this.onInvalidated(()=>removeEventListener("message",s))}}const v=Symbol("null");let E=0;class T extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[e]=arguments;if(e!=null){if(typeof e[Symbol.iterator]!="function")throw new TypeError(typeof e+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[t,s]of e)this.set(t,s)}}_getPublicKeys(e,t=!1){if(!Array.isArray(e))throw new TypeError("The keys parameter must be an array");const s=this._getPrivateKey(e,t);let r;return s&&this._publicKeys.has(s)?r=this._publicKeys.get(s):t&&(r=[...e],this._publicKeys.set(s,r)),{privateKey:s,publicKey:r}}_getPrivateKey(e,t=!1){const s=[];for(let r of e){r===null&&(r=v);const i=typeof r=="object"||typeof r=="function"?"_objectHashes":typeof r=="symbol"?"_symbolHashes":!1;if(!i)s.push(r);else if(this[i].has(r))s.push(this[i].get(r));else if(t){const o=`@@mkm-ref-${E++}@@`;this[i].set(r,o),s.push(o)}else return!1}return JSON.stringify(s)}set(e,t){const{publicKey:s}=this._getPublicKeys(e,!0);return super.set(s,t)}get(e){const{publicKey:t}=this._getPublicKeys(e);return super.get(t)}has(e){const{publicKey:t}=this._getPublicKeys(e);return super.has(t)}delete(e){const{publicKey:t,privateKey:s}=this._getPublicKeys(e);return!!(t&&super.delete(t)&&this._publicKeys.delete(s))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}new T;function A(){}function c(n,...e){}const I={debug:(...n)=>c(console.debug,...n),log:(...n)=>c(console.log,...n),warn:(...n)=>c(console.warn,...n),error:(...n)=>c(console.error,...n)};return(async()=>{try{const{main:n,...e}=y,t=new l("content",e);return await n(t)}catch(n){throw I.error('The content script "content" crashed on startup!',n),n}})()}();
content;
