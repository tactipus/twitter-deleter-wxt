var content=function(){"use strict";function w(r){return r}const p={matches:["*://*.google.com/*"],main(){console.log("Hello content.")}},d=globalThis.browser?.runtime?.id==null?globalThis.chrome:globalThis.browser;function o(r,...t){}const g={debug:(...r)=>o(console.debug,...r),log:(...r)=>o(console.log,...r),warn:(...r)=>o(console.warn,...r),error:(...r)=>o(console.error,...r)};class c extends Event{constructor(t,e){super(c.EVENT_NAME,{}),this.newUrl=t,this.oldUrl=e}static EVENT_NAME=u("wxt:locationchange")}function u(r){return`${d?.runtime?.id}:content:${r}`}function f(r){let t,e;return{run(){t==null&&(e=new URL(location.href),t=r.setInterval(()=>{let s=new URL(location.href);s.href!==e.href&&(window.dispatchEvent(new c(s,e)),e=s)},1e3))}}}class a{constructor(t,e){this.contentScriptName=t,this.options=e,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}static SCRIPT_STARTED_MESSAGE_TYPE=u("wxt:content-script-started");isTopFrame=window.self===window.top;abortController;locationWatcher=f(this);receivedMessageIds=new Set;get signal(){return this.abortController.signal}abort(t){return this.abortController.abort(t)}get isInvalid(){return d.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(t){return this.signal.addEventListener("abort",t),()=>this.signal.removeEventListener("abort",t)}block(){return new Promise(()=>{})}setInterval(t,e){const s=setInterval(()=>{this.isValid&&t()},e);return this.onInvalidated(()=>clearInterval(s)),s}setTimeout(t,e){const s=setTimeout(()=>{this.isValid&&t()},e);return this.onInvalidated(()=>clearTimeout(s)),s}requestAnimationFrame(t){const e=requestAnimationFrame((...s)=>{this.isValid&&t(...s)});return this.onInvalidated(()=>cancelAnimationFrame(e)),e}requestIdleCallback(t,e){const s=requestIdleCallback((...n)=>{this.signal.aborted||t(...n)},e);return this.onInvalidated(()=>cancelIdleCallback(s)),s}addEventListener(t,e,s,n){e==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),t.addEventListener?.(e.startsWith("wxt:")?u(e):e,s,{...n,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),g.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:a.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(t){const e=t.data?.type===a.SCRIPT_STARTED_MESSAGE_TYPE,s=t.data?.contentScriptName===this.contentScriptName,n=!this.receivedMessageIds.has(t.data?.messageId);return e&&s&&n}listenForNewerScripts(t){let e=!0;const s=n=>{if(this.verifyScriptStartedEvent(n)){this.receivedMessageIds.add(n.data.messageId);const i=e;if(e=!1,i&&t?.ignoreFirstEvent)return;this.notifyInvalidated()}};addEventListener("message",s),this.onInvalidated(()=>removeEventListener("message",s))}}const b=Symbol("null");let y=0;class m extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[t]=arguments;if(t!=null){if(typeof t[Symbol.iterator]!="function")throw new TypeError(typeof t+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[e,s]of t)this.set(e,s)}}_getPublicKeys(t,e=!1){if(!Array.isArray(t))throw new TypeError("The keys parameter must be an array");const s=this._getPrivateKey(t,e);let n;return s&&this._publicKeys.has(s)?n=this._publicKeys.get(s):e&&(n=[...t],this._publicKeys.set(s,n)),{privateKey:s,publicKey:n}}_getPrivateKey(t,e=!1){const s=[];for(let n of t){n===null&&(n=b);const i=typeof n=="object"||typeof n=="function"?"_objectHashes":typeof n=="symbol"?"_symbolHashes":!1;if(!i)s.push(n);else if(this[i].has(n))s.push(this[i].get(n));else if(e){const h=`@@mkm-ref-${y++}@@`;this[i].set(n,h),s.push(h)}else return!1}return JSON.stringify(s)}set(t,e){const{publicKey:s}=this._getPublicKeys(t,!0);return super.set(s,e)}get(t){const{publicKey:e}=this._getPublicKeys(t);return super.get(e)}has(t){const{publicKey:e}=this._getPublicKeys(t);return super.has(e)}delete(t){const{publicKey:e,privateKey:s}=this._getPublicKeys(t);return!!(e&&super.delete(e)&&this._publicKeys.delete(s))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}new m;function S(){}function l(r,...t){}const v={debug:(...r)=>l(console.debug,...r),log:(...r)=>l(console.log,...r),warn:(...r)=>l(console.warn,...r),error:(...r)=>l(console.error,...r)};return(async()=>{try{const{main:r,...t}=p,e=new a("content",t);return await r(e)}catch(r){throw v.error('The content script "content" crashed on startup!',r),r}})()}();
content;
